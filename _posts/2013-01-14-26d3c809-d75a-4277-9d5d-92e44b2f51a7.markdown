---
layout: post
title:  チーム開発レトロスペクティブ
---

大学の講義の関係で、4月から12月まで7人のチームで開発を行いました。自分の役割は
チームリーダーでした。これはある種残念なことかもしれませんが、いろいろやりたい
ことができる立場であったので、やってみたいことを出来る範囲で盛り込んでいきまし
た。この記事では、このチーム開発における制約条件を述べた後に、その制約下ででき
そうだと考えたことをまとめます。そして実際に行ったことについて、その意図と実際
の運用結果、反省点をまとめます。最後に適当に雑感など述べます。

# 制約条件

このチーム開発を行うプロジェクトでは次のような制約条件がありました:

* 開発期間は5月から11月まで
* 給与は出ない
* チーム人数は6人から7人
* 開発するアプリケーションは「大学生の学びを楽しくするアプリケーション」
* Android上で動作するアプリケーションであること

これらの制約条件のうち最もきついのは最初の開発期間です。一見開発期間が半年以上
あるように見えますが、実際は週3時間の講義があるだけです。それ以外の時間は自分
たちで捻出しなければいけません。仮に講義以外の時間を5時間割いたとすると、週当
たり8時間の作業時間になります。つまり週当たりフルタイムの仕事の5分の1の作業時
間になるので、7ヶ月のうちの使えそうな開発期間は1ヶ月より少し多いぐらいです。た
だ、8月と9月は夏休みになっていますし、他の講義、研究、ゼミをこなしながら週に5
時間捻出できるとは考えにくいので、実際は1ヶ月より少し少ないぐらいになると考え
られます。

次の制約条件の給与が出ない。これによってこのプロジェクトは企業内で行われるプロ
ジェクトというよりかは、オープンソースプロジェクトに近いものになります。別にこ
の講義に参加しなくても卒業はできますし、もっと言えば作業しなくてもクビになると
か単位が出ないとかいう罰則はありません。

チーム人数については特にこれといって変なところはないと思います。ただ、このチー
ムは好きな人と組んでやるわけではなく、完全にランダムです。(同じ研究室の人とは
組めないという制約はあります)なので、お互い知らない人同士でチームを組むことに
なります。

開発するアプリケーションについては、テーマが与えられるだけで詳細は決まっていま
せん。なので何を作るのか、どういう機能をもたせるのかについては全てチームで決め
ることになります。

開発プラットフォームについてはAndroidが指定されます。ただしチームメンバーのほ
とんどはAndroidで開発したことはないので、何ができるのかから学ぶ必要がありま
す。

# 制約条件下でできること

まずなんといっても何もできません(笑)なんていったって、あったこともない人とチー
ム組んで何を作るのか決めて役割分担して全くいじったことのないプラットフォームの
上で動くアプリケーションを企画・制作を1ヶ月で行わないといけないんです。しかも
タダで。

しかし、チーム開発を始めた直前はこんなことにあまり気づいていなかったので、呑気
に半年あればそれなりに終わるのではみたいなことを考えていました。どちらかという
とこの時点で考えていたのは給与が出ないことです。言い換えるとチームのモチベー
ションのメンテナンスをどうやって行うかがこの時点で意識していた課題でした。これ
に対しては次のようなことをことが行えると考えました:

* チームっぽさを出す
* チーム開発でしかできなさそうなことを行う
* ベストプラクティス"っぽい"ことを行う

最終的に、チーム開発でしかできなさそうなこととしては次のことを行えると考えまし
た:

* ソースコードのピアレビュー

また、ベストプラクティス"っぽい"こととしては、次のことを行えると考えました:

* テストをまじめに書く
* リリースを細かくして段階的な開発を行う

また、開発するアプリケーションには自由度がかなりあったので、次のようなことを掲
げることを考えました:

* 自分たちが「作りたいもの」ではなく自分たちが「使いたいもの」を作る

逆にできなさそうだなぁと思って避けたものには次のようなものがあります:

* 頻繁にミーティングを行う
* 進捗管理を細かく行う
* リスク管理をする
* 超ヤバイアプリケーションを作る

最初はこれらのようなことを考えてチーム開発に臨んでいきました。

# 実際に行ったこと

## チームっぽさを出す

結果: 効果があったかは全くわからない。しかし、対外的に「変なチーム」であること
をアピールできた。

「チームっぽさを出す」はチームメンバーのモチベーション維持のための施策として考
えたものでした。なぜこれがモチベーションの維持につながるかはピープルウェアあた
りに書いてあったと思います。(えぇっ！
[ピープルウェア](http://www.amazon.co.jp/exec/obidos/ASIN/4822281108/dcmbcd-22/)
を読んでいないだって！？)

これは効果があったかはわかりませんが、実際自分のチーム名は変でしたし、アプリ
ケーション名も変です。チームロゴもかなり早い段階でできてましたし、チームロゴス
テッカーを作った人もいました。自分はチーム名の最後に変な文字を突っ込んだぐらい
しかやってなかったと思うので、チームメンバーが変なことをしようとして変なふうに
動いてくれたのは良かったと思います。ラッキーですね。

## ソースコードのピアレビュー

結果: 効果があったと言えると思う。しかし、いくつか問題もあった。

ピアレビューはチーム開発じゃないとできなさそうなこととして行いました。狙った効
果としては、チーム開発じゃないとできないことを行なって、チーム開発をするメリッ
トを演出しようということがまずひとつありますが、それ以外にも狙った効果がありま
す:

* 他人のコードを見て使ったことのないプラットフォームの知識を共有する
* まずいコードが入るのを防ぐ
* 責任を分散する
* 他人から見られるという意識を持ってもらうことで書くコードの質を向上させる

最初の目標であるチーム開発っぽさの演出は、チームメンバーの一人から「チーム開発
をしている感じがする」という感想を聞いたことがあるので、効果があったと言えると
思います。知識の共有はできているのかわかりませんでした。まずいコードが入るのを
防ぐのはできたと思います。わかりにくい動作をするコードの混入を防いだというのは
何回かあったと思います。責任の分散はどこまでできているかわかりませんが、他人の
書いたコードの続きを書くことができていたので、ある程度達成できていると思いま
す。コードの質の向上もどれぐらいできているのかわかりません。

ピアレビューについては他のチームのメンバー2人から、もしもう一度チーム開発をす
るなら導入するという意見を聞けました。どうやら責任の分散をメリットとして感じる
ようです。

問題もそれなりにありました。まずピアレビューをすることでリソースが削られていき
ます。ただ、これはレビューをするための時間が足りないというよりかは、レビューの
やりとりの同期にかかる時間が大きかったです。逆にレビューを振ってしまえばレ
ビュー自体にかかる時間は通常はそこまでかかりませんでした。

もう一つの問題は、レビューに際して議論が過熱して最終的に人格攻撃が行われてし
まったことでした。これについては受けた側のメンバーと話して、お互い「まさか大学
の授業でこんな心労を受けるとは」という感じの話をしたりしました。そのあとに、そ
こら辺のいざこざを一旦自分の方で引き受けて整理しようとした矢先にそのメンバーが
メンタル的に復活したと言っていたので、自分としてはほぼ何もせずに終わりました。
ただ逆にした側の方のケアをどうしようかというのも一緒に何もせずに終わってしまい
ました。

## テストをまじめに書く

結果: 効果があったかはわからない。全部ではないが、それなりの部分でそれなりにテ
ストがかけている。ただ、テストを書くのは技術が必要。

テスト、特にこの文脈だと自動化されたテストを書くことは、もう既にベストプラク
ティスではないかもしれないですが、あまり学生生活を行う上でテストを書くことはな
かったので、書くようにするということを盛り込みました。何かしらテストを書くこと
で影響が出たかはわかりませんが、少なくとも単体テストや結合テストが出来る程度の
設計になっています。

テストを書くのはやっぱり技術が必要で、最初は何をテストすればいいのかよくわから
ない感じになります。自分もそうだったのですが、最近流行りのテスト駆動開発の本で
[Growing Object-Oriented Software, Guided by Tests](http://www.amazon.co.jp/exec/obidos/ASIN/0321503627/dcmbcd-22/)
を読んで、だいたいこんな
感じというのがつかめました。最近は
[邦訳](http://www.amazon.co.jp/exec/obidos/ASIN/4798124583/dcmbcd-22/) も出た
ようです。

といっても、こういう本を読みあさって自分自身意図したテストをきちんと書けるよう
になったのは後のほうです。特に要求仕様を満たしているかを確認するための受け入れ
テストを書くために、要求仕様は測定可能な方法で記述しなければならないということ
に気づいて、要求仕様を書きなおしたのは最初のリリースの直前でした。この見直し
は、
[成功する要求仕様 失敗する要求仕様](http://www.amazon.co.jp/exec/obidos/ASIN/4822282910/dcmbcd-22/)
から学んだことから発生しています。


## リリースを細かくして段階的な開発を行う

結果: 3段階のリリースができた。リリースの合間で要件の見直し、プライオリティの
設定ができていたので効果があった。

一応マイルストーンを設定して、その度にとりあえず動くものがリリースできていまし
た。最初のリリースの後にもう一度要件を見なおして次のリリースで達成する要件を確
定し、それが終わったら最後のリリースに向けて何をするのかをもう一度決定する形に
なりました。リリースを細かくする意図の一つとしては、変化していく状況に合わせて
舵取りができるようにするという事が挙げられると思いますが、これはきちんと達成で
きています。

ただ、「物事には優先順位があって、それに基いて優先度が高いものから実装してい
く」ということをもっと広めるべきだったと思いました。というのも、開発が終わった
後のチームでのレビューのときに、「ブレインストーミングで出た意見を最終的に全部
は達成することができなかった」という意見が聞こえたからです。すべてを達成できる
わけではないから、いくつかの物事は最初からスコープアウトされたり、次のマイルス
トーンには入らない場合があるということは、当たり前ではないのかもしれません。こ
の部分が共有できていないと、「いつまでたってもあの機能が実装されない」という感
じに捉えられると思います。

## 自分たちが「作りたいもの」ではなく自分たちが「使いたいもの」を作る

結果: 常に意識していたかは分からないが、いくつかの機能を「リジェクト」できた。
しかし、実際にDogfoodingはできなかった。

これは、大体が情報を専門にしているメンバーだったので、技術ベースのできるからや
るという方向に行かないようにするためのセーフティとして掲げたものでした。これを
チームメンバーがどれほど認識していたかはわかりませんが、少なくとも一人はそれを
よく覚えているようです。実際、ある機能が作れそうだ、作るとしたらこういう課題が
あるがどうやって解決できそうか、という話題が上がったことはあったのですが、こう
いった機能は意図的に「自分たちが使いたいと思うものから外れるからやらない」とい
うリジェクトをしています。

しかし、「作りたいもの」から離れることは出来ましたが、「使いたいもの」になって
いるかどうかは測定できていません。実際AndroidじゃなくてWebアプリだったなぁとは
思うのですが。

# 雑感

普通にアルバイトをしてもサークルで活動しても現実は悪い方にも良い方にも変えるこ
とはできないし、その現実に対処して少しずつ変化させていけるから物事をなし得る人
はすごいのだなぁと思うのですが、今回は思ったよりやりたいことができた感じがしま
す。これはひょっとしたらちょっと残念なのかもしれません。というのも、他の人から
もっとこうであるべきだというのがあっても良かったのかなぁと。しかし、リソースが
足りない中でできることは限られているし、だいたい本に書いてあるようなことをピッ
クアップして実践しているだけなので、こうも何もなかったかもしれません。

チームリーダーをしていて、実はこうなんじゃないかと思ったことを2つ挙げます。

## もっと「なぜ」を発信していくこと

現実は変えにくいという原因の一つとして、人間は長期的な利益よりも短期的な利益を
重視する傾向にあることが挙げられます。なので、長期的に利益がありそうだが、それ
単体では実行する許可がおりなさそうなことを、短期的な利益をもたらすことと抱きあ
わせで実行して、長期的な利益がありそうなことを隠して行うという癖を身につけてし
まいました。つまり、自分は長期的な利益に基づいた意図を隠すようになっています。
これは変更に対して非常に保守的な環境や、コスト意識がシビアな環境では有効だった
りするのですが、もっとゆるい環境ではそんなにひた隠しにする必要はなく、むしろ
ちゃんと意図を述べないと誤解されたり、表面上の理解のみで終わってしまうことが多
く、弊害が出るのではないかなと思ってきています。


## チームの雰囲気作りよりもチームの方針の採用基準を明確にすべき

チームの雰囲気を重視して意見をあげやすいようにするというのが重要かなと思ってい
ましたが、最近はこれをそこまで重要視しなくなりました。雰囲気は良いに越したこと
はないのですが、チームの雰囲気を重視する方針は逆に取れば、チームの方針は雰囲気
やメンバー間の人間関係によって決定されるというメッセージを出しているのではと思
えます。また、雰囲気を良くしようというのは成功することが前提の方針のようにも見
えます。締め切り間際で忙しくなるにつれて、雰囲気は悪くなりえます。こういった状
況に対して、単純に普段から雰囲気を良くしようという方針は何の意味もありません。

代わりに打ち出すべきなのは、チームの方針はそれを打ち出した人に依らず、単純に
「チームがそれを行うべきかどうか」という基準によって決まるというメッセージでは
ないかなと思っています。こういうメッセージを出すことで、意見が出る条件が「雰囲
気が良いかどうか」ではなく「意見として優れているかどうか」に変化することが期待
出来ます。

次のような話があります:

> 小学校の体育の時間のサッカーを見ていると、面白いことに気づきます。時間が来る
> と、試合終了の笛とともに先生がコートの真ん中に両チームを集めます。「三対二で
> 赤組の勝ち！」と言うと、赤組の子どもたちは「やったー！」、白組の子どもたちは
> 「残念……」。そこで白組の子どもたちに「どこがまずかったと思う？」と聞いてみ
> ると、「一点足りなかった」という答え。「じゃあ、次はどうしたらいいと思う？」
> と聞くと、「あと二点は取れるようにならなきゃ！」。つまり、子どもたちは成功失
> 敗が「結果」でしかわからないのです。試合の中で、具体的にどこがまずかったの
> か、失敗の正体がつかめなければ、学習のしようがありません。
>
> -- [ストーリーとしての競争戦略](http://www.amazon.co.jp/exec/obidos/ASIN/4492532706/dcmbcd-22/) (楠木 建 p465)

雰囲気がすぐれないと、意見は出にくくなります。特に雰囲気重視をしていた場合は顕
著でしょう。雰囲気が優れていない状態になってしまったチーム全体が悪いことをして
いる気分になり得るからです。これに対する対処法として、普段から雰囲気を良くする
というのは、上記の話の2点とらなくてはいけないという意見と変わらないように思え
ます。変えるとしたら雰囲気を悪くした原因そのものを潰すべきですが、どう頑張って
も悪くなるときは悪くなります。であれば、悪くなっても弊害が出ないようにしておく
方が良いのではないかと考えています。
