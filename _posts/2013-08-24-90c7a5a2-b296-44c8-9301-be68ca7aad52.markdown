---
layout: post
title: Thinkpad Bluetoothワイヤレストラックポイントキーボード買った
---

[Thinkpadのはやりのキーボー
ド](http://www.amazon.co.jp/exec/obidos/ASIN/B00DLK4GO2/dcmbcd-22/ref=nosim/)を
購入した。Bluetoothなのできちんと使えるかどうか不安だったけど普通に使える。ト
ラックポイントの反応が少し悪い気がするのと、ごくまれにキーが押しっぱなし状態に
なっているように認識される。

Bluezがversion 5になってから色々変わっている気がしてよくわからなかったけど、とり
あえず、[Bluetooth Keyboard - Arch
Wiki](https://wiki.archlinux.org/index.php/Bluetooth_Keyboard)に書いてあるように

```
$ bluetoothctl -a
# power on
# scan on
# pair <XX:XX:XX:XX:XX:XX>
# trust <XX:XX:XX:XX:XX:XX>
# connect <XX:XX:XX:XX:XX:XX>
```

と設定すると動くようになった。

また、起動時にBluetoothコントローラがpower off状態なので、
`/etc/udev/rules.d/10-local.rules`に

```
ACTION=="add", KERNEL=="hci0", RUN+="/usr/bin/hciconfig hci0 up"
```

と書いたら起動時にキーボードが使えるようになった。ちょっと使えるようになるまで遅
いけど。

CapsLockをCtrlにするやつは、xorg.confに次のように書いてみたがダメだった。

```
Section "InputClass"
    Identifier "Thinkpad Keyboard"
    MatchIsKeyboard "yes"
    Option "XkbOptions" "ctrl:nocaps"
EndSection
```

結局`$HOME/.xmodmap`を作って次のように書いて、`$HOME/.xinitrc`で`xmodmap
~/.xmodmap`するようにした。

```
remove Lock = Caps_Lock
keysym Caps_Lock = Control_L
add Control = Control_L
```
