<!DOCTYPE html>
<html lang="en">
<head>
        <title>PelicanとGitHub Pagesを使う</title>
        <meta charset="utf-8" />
        <link rel="stylesheet" href="./theme/css/main.css" type="text/css" />
                <link href="/feeds/all.atom.xml" type="application/atom+xml" rel="alternate" title="A Pelican Blog Atom Feed" />
                
        <!--[if IE]>
                <script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->

        <!--[if lte IE 7]>
                <link rel="stylesheet" type="text/css" media="all" href="./css/ie.css"/>
                <script src="./js/IE8.js" type="text/javascript"></script><![endif]-->

        <!--[if lt IE 7]>
                <link rel="stylesheet" type="text/css" media="all" href="./css/ie6.css"/><![endif]-->

</head>

<body id="index" class="home">
        <header id="banner" class="body">
                <h1><a href="./">A Pelican Blog </a></h1>
                <nav><ul>
                                                                    <li><a href="./pages/about.html">About</a></li>
                                                                    <li ><a href="./category/android.html">Android</a></li>
                                    <li ><a href="./category/java.html">Java</a></li>
                                    <li ><a href="./category/python.html">Python</a></li>
                                    <li class="active"><a href="./category/articles.html">articles</a></li>
                                    <li ><a href="./category/misc.html">misc</a></li>
                                </ul></nav>
        </header><!-- /#banner -->
        <section id="content" class="body">
  <article>
    <header>
      <h1 class="entry-title">
        <a href="./42a4fd48-6f58-11e1-bdce-040ccee352e6.html" rel="bookmark"
           title="Permalink to PelicanとGitHub Pagesを使う">PelicanとGitHub Pagesを使う</a></h1>
          </header>

    <div class="entry-content">
      <footer class="post-info">
        <abbr class="published" title="2012-03-16T20:07:46">
                Fri 16 March 2012
        </abbr>

                <address class="vcard author">
                By <a class="url fn" href="./author/draftcode.html">draftcode</a>
        </address>
        <p>In <a href="./category/articles.html">articles</a>. </p>

</footer><!-- /.post-info -->      <p>reStructuredTextが使いたかったので、Pythonで書かれてる <a class="reference external" href="http://pelican.notmyidea.org/en/2.8/index.html">Pelican</a> という静的
ブログジェネレータを使ってHTMLを出力し、GitHub Pagesで公開するようにしました。</p>
<div class="section" id="id1">
<h2>Pelican</h2>
<p>最近は静的にブログを生成してくれるツールはたくさんあると思うんですが、どうも
Markdownをなんか拡張したやつだったり、reStructuredTextを使っていても、ファイル
内のメタデータをうまく使ってくれなかったり、自分が書いたエントリのディレクトリ
内の位置を日付ごとのディレクトリにしなければいけなかったりして、あんまり好みの
やつが見つからなかったんですが、最近みつけたPelicanはそのような制限がないので
気に入って使っています。</p>
<p>自分はPelicanのソースを引っ張ってきて、開発中のバージョンを直接使っています。
開発中のバージョンを使うにはこれだけでOK:</p>
<div class="highlight"><pre>git clone https://github.com/ametaireau/pelican.git
cd pelican
python setup.py develop
</pre></div>
<p>こうするとcloneしてきたディレクトリにあるファイルを使うようにうまくリンクが張
られて、ちょっとコードの修正して動かしてみるっていうのが簡単にできるようになり
ます。</p>
</div>
<div class="section" id="github-pages">
<h2>GitHub Pages</h2>
<p>なんかGitHubには <a class="reference external" href="http://pages.github.com/">GitHub Pages</a> っていうPushすると中のHTMLが公開されるという
おしゃれ機能があって、それを使って公開するようにしました。で、自分が使っている
のはUser Pagesなんですが、どのブランチにPushしたら公開されるのかが書いてなくて、
どうもやってみた感じmasterに公開されたやつしか公開されないみたいです。User
Pagesの場合はgh-pagesにPushしても無駄みたいですよ。わからないけど。なので次の
ようなブランチ構成にしてみました:</p>
<div class="highlight"><pre>source   -&gt; origin/source
gh-pages -&gt; origin/master
</pre></div>
<p>こういう風にするには、たぶん次のようにすればいいはず:</p>
<div class="highlight"><pre>git init .
git branch -m master source
git remote add origin &lt;自分のGitHubリポジトリでコピーしてきたなにか&gt;
</pre></div>
<p>gh-pagesはなんかよしなに作ってくれる <a class="reference external" href="https://github.com/davisp/ghp-import">ghp-import</a> があるので、それを導入しま
した:</p>
<div class="highlight"><pre>pip install ghp-import
</pre></div>
</div>
<div class="section" id="conf-py">
<h2>conf.pyを書く</h2>
<p><a class="reference external" href="https://github.com/draftcode/draftcode.github.com/tree/source/conf.py">conf.py</a> みたいに書いています。なんか下の方で怪しいことしてますが。ディレク
トリ構成は <a class="reference external" href="https://github.com/draftcode/draftcode.github.com/tree/source">draftcode/draftcode.github.com</a> みたいになってます。</p>
</div>
<div class="section" id="post-commit">
<h2>post-commitを仕込む</h2>
<p>次のような内容のファイルを、 <tt class="docutils literal"><span class="pre">.git/hooks/post-commit</span></tt> に仕込んでおきます:</p>
<div class="highlight"><pre>pelican -s conf.py &amp;&amp; ghp-import output &amp;&amp; git push origin gh-pages:master source:source
</pre></div>
<p>これでなんかコミットしたらページがビルドされてPushされます。しばらく待つと向こ
うの方のページにも反映されます。やったね!</p>
</div>

    </div><!-- /.entry-content -->
    
  </article>
</section>
        <section id="extras" class="body">
                        </section><!-- /#extras -->

        <footer id="contentinfo" class="body">
                <address id="about" class="vcard body">
                Proudly powered by <a href="http://getpelican.com/">Pelican</a>, which takes great advantage of <a href="http://python.org">Python</a>.
                </address><!-- /#about -->

                <p>The theme is by <a href="http://coding.smashingmagazine.com/2009/08/04/designing-a-html-5-layout-from-scratch/">Smashing Magazine</a>, thanks!</p>
        </footer><!-- /#contentinfo -->

</body>
</html>